document.getElementById("ts-nav").style.backgroundColor = "goldenrod";
document.getElementById("ts-nav-a").style.color = "black";

// update ts_data (tournament stats data) from statto-player-out
let ts_data = [
  [
    "Player",
    "Points played total",
    "Offense points played",
    "Defense points played",
    "Offense points won",
    "Defense points won",
    "Touches",
    "Points played with touches",
    "Throws",
    "Catches",
    "Possessions initiated",
    "Assists",
    "Secondary assists",
    "Goals",
    "Turnovers",
    "Thrower errors",
    "Receiver errors",
    "Defensive blocks",
    "Stall outs for",
    "Stall outs against",
    "Total completed throw distance (m)",
    "Total completed throw gain (m)",
    "Average completed throw distance (m)",
    "Average completed throw gain (m)",
    "Total caught pass distance (m)",
    "Total caught pass gain (m)",
    "Average caught pass distance (m)",
    "Average caught pass gain (m)",
  ],
  [
    "Tanner Yue",
    "102",
    "3",
    "99",
    "2",
    "43",
    "12",
    "12",
    "9",
    "11",
    "1",
    "0",
    "2",
    "3",
    "2",
    "1",
    "1",
    "2",
    "0",
    "0",
    "78.00",
    "-9.36",
    "11.14",
    "-1.34",
    "179.74",
    "154.34",
    "16.34",
    "14.03",
  ],
  [
    "Roman Leigh",
    "268",
    "174",
    "94",
    "117",
    "48",
    "151",
    "114",
    "127",
    "132",
    "19",
    "10",
    "14",
    "24",
    "21",
    "15",
    "6",
    "26",
    "0",
    "0",
    "1584.48",
    "675.68",
    "14.67",
    "6.26",
    "2761.88",
    "2022.37",
    "20.92",
    "15.32",
  ],
  [
    "Chris Pantaleon",
    "258",
    "8",
    "250",
    "4",
    "106",
    "200",
    "106",
    "188",
    "141",
    "59",
    "16",
    "17",
    "12",
    "36",
    "31",
    "5",
    "15",
    "0",
    "0",
    "2224.31",
    "1021.34",
    "15.03",
    "6.90",
    "2222.64",
    "955.58",
    "15.76",
    "6.78",
  ],
  [
    "Charles Thorpey",
    "200",
    "78",
    "122",
    "56",
    "60",
    "163",
    "102",
    "152",
    "109",
    "54",
    "13",
    "15",
    "11",
    "18",
    "14",
    "4",
    "7",
    "0",
    "0",
    "2001.94",
    "974.74",
    "14.61",
    "7.11",
    "1780.96",
    "558.18",
    "16.34",
    "5.12",
  ],
  [
    "Sakhin Selvamani",
    "43",
    "1",
    "42",
    "0",
    "22",
    "5",
    "4",
    "3",
    "5",
    "0",
    "1",
    "0",
    "2",
    "2",
    "1",
    "1",
    "0",
    "0",
    "0",
    "27.12",
    "15.48",
    "13.56",
    "7.74",
    "124.92",
    "117.12",
    "24.98",
    "23.42",
  ],
  [
    "Jason Huang",
    "5",
    "1",
    "4",
    "1",
    "0",
    "2",
    "1",
    "2",
    "2",
    "0",
    "0",
    "0",
    "0",
    "0",
    "0",
    "0",
    "0",
    "0",
    "0",
    "18.51",
    "3.34",
    "9.25",
    "1.67",
    "33.23",
    "11.57",
    "16.61",
    "5.78",
  ],
  [
    "Vincent Cook",
    "62",
    "1",
    "61",
    "1",
    "26",
    "17",
    "13",
    "15",
    "17",
    "0",
    "1",
    "3",
    "2",
    "3",
    "3",
    "0",
    "2",
    "0",
    "0",
    "162.20",
    "46.43",
    "13.52",
    "3.87",
    "232.40",
    "147.68",
    "13.67",
    "8.69",
  ],
  [
    "Xavier Herrera",
    "61",
    "4",
    "57",
    "2",
    "25",
    "28",
    "21",
    "19",
    "26",
    "2",
    "2",
    "1",
    "10",
    "7",
    "6",
    "1",
    "3",
    "0",
    "0",
    "229.19",
    "145.19",
    "17.63",
    "11.17",
    "519.90",
    "379.02",
    "20.00",
    "14.58",
  ],
  [
    "Rafael Antipuesto",
    "1",
    "0",
    "1",
    "0",
    "0",
    "0",
    "0",
    "0",
    "0",
    "0",
    "0",
    "0",
    "0",
    "0",
    "0",
    "0",
    "0",
    "0",
    "0",
    "0.00",
    "0.00",
    "0.00",
    "0.00",
    "0.00",
    "0.00",
    "0.00",
    "0.00",
  ],
  [
    "Edwin Lu",
    "22",
    "3",
    "19",
    "1",
    "7",
    "4",
    "3",
    "4",
    "3",
    "1",
    "0",
    "0",
    "0",
    "0",
    "0",
    "0",
    "1",
    "0",
    "0",
    "48.14",
    "-6.02",
    "12.03",
    "-1.50",
    "54.32",
    "32.03",
    "18.11",
    "10.68",
  ],
  [
    "Kevin Camelin",
    "127",
    "3",
    "124",
    "3",
    "52",
    "47",
    "35",
    "36",
    "46",
    "1",
    "2",
    "7",
    "11",
    "4",
    "3",
    "1",
    "9",
    "0",
    "0",
    "424.35",
    "82.21",
    "12.86",
    "2.49",
    "751.25",
    "446.02",
    "16.33",
    "9.70",
  ],
  [
    "Ryan Novinsky",
    "106",
    "98",
    "8",
    "69",
    "3",
    "93",
    "54",
    "77",
    "86",
    "7",
    "5",
    "6",
    "16",
    "9",
    "7",
    "2",
    "4",
    "0",
    "0",
    "981.78",
    "275.01",
    "14.44",
    "4.04",
    "1622.59",
    "1045.66",
    "18.87",
    "12.16",
  ],
  [
    "Caleb Mok",
    "326",
    "225",
    "101",
    "151",
    "42",
    "518",
    "208",
    "489",
    "445",
    "73",
    "22",
    "41",
    "29",
    "41",
    "32",
    "9",
    "26",
    "0",
    "0",
    "6067.33",
    "1884.92",
    "13.57",
    "4.22",
    "6456.26",
    "2490.58",
    "14.51",
    "5.60",
  ],
  [
    "Joshua Krone",
    "212",
    "5",
    "207",
    "2",
    "86",
    "52",
    "44",
    "40",
    "52",
    "0",
    "4",
    "6",
    "12",
    "7",
    "0",
    "7",
    "9",
    "0",
    "0",
    "565.05",
    "167.94",
    "14.87",
    "4.42",
    "927.89",
    "747.24",
    "17.84",
    "14.37",
  ],
  [
    "Tadeas Horn",
    "346",
    "235",
    "111",
    "161",
    "56",
    "788",
    "268",
    "759",
    "625",
    "163",
    "61",
    "39",
    "29",
    "74",
    "72",
    "2",
    "18",
    "0",
    "0",
    "11106.14",
    "5368.04",
    "16.78",
    "8.11",
    "8405.45",
    "1745.20",
    "13.45",
    "2.79",
  ],
  [
    "Jake Dapiran",
    "36",
    "33",
    "3",
    "25",
    "2",
    "16",
    "11",
    "13",
    "16",
    "0",
    "3",
    "0",
    "3",
    "5",
    "2",
    "3",
    "0",
    "0",
    "0",
    "151.77",
    "81.00",
    "13.80",
    "7.36",
    "222.91",
    "170.63",
    "13.93",
    "10.66",
  ],
  [
    "Ryan Phi-Nguyen",
    "320",
    "111",
    "209",
    "79",
    "96",
    "537",
    "223",
    "517",
    "365",
    "172",
    "98",
    "25",
    "19",
    "71",
    "64",
    "7",
    "37",
    "0",
    "1",
    "8390.15",
    "5119.40",
    "19.47",
    "11.88",
    "5392.79",
    "2089.53",
    "14.77",
    "5.72",
  ],
  [
    "Mark Blackburn",
    "58",
    "2",
    "56",
    "1",
    "24",
    "5",
    "5",
    "3",
    "5",
    "0",
    "0",
    "0",
    "2",
    "1",
    "1",
    "0",
    "2",
    "0",
    "0",
    "24.17",
    "10.44",
    "12.08",
    "5.22",
    "70.98",
    "60.62",
    "14.20",
    "12.12",
  ],
  [
    "Isaac Thongthap",
    "114",
    "104",
    "10",
    "66",
    "3",
    "68",
    "45",
    "58",
    "60",
    "8",
    "2",
    "8",
    "10",
    "12",
    "5",
    "7",
    "4",
    "0",
    "0",
    "660.30",
    "48.83",
    "12.70",
    "0.94",
    "1036.14",
    "654.27",
    "17.27",
    "10.90",
  ],
  [
    "Jacob Linares",
    "207",
    "17",
    "190",
    "10",
    "93",
    "93",
    "73",
    "57",
    "90",
    "3",
    "4",
    "5",
    "36",
    "12",
    "7",
    "5",
    "20",
    "1",
    "0",
    "688.99",
    "249.15",
    "13.78",
    "4.98",
    "2210.20",
    "1702.98",
    "24.56",
    "18.92",
  ],
  [
    "Joseph Faso",
    "278",
    "222",
    "56",
    "152",
    "24",
    "383",
    "178",
    "364",
    "277",
    "106",
    "17",
    "21",
    "19",
    "36",
    "28",
    "8",
    "18",
    "0",
    "0",
    "4620.48",
    "1789.48",
    "14.04",
    "5.44",
    "4185.51",
    "1632.32",
    "15.11",
    "5.89",
  ],
  [
    "Jakob Lail",
    "248",
    "151",
    "97",
    "97",
    "35",
    "195",
    "112",
    "177",
    "165",
    "30",
    "18",
    "16",
    "19",
    "21",
    "19",
    "2",
    "9",
    "0",
    "0",
    "2364.38",
    "1028.18",
    "15.45",
    "6.72",
    "2553.49",
    "1168.04",
    "15.48",
    "7.08",
  ],
  [
    "Daniel Thompson",
    "189",
    "178",
    "11",
    "120",
    "6",
    "126",
    "87",
    "108",
    "115",
    "11",
    "5",
    "7",
    "17",
    "20",
    "12",
    "8",
    "4",
    "0",
    "1",
    "1262.09",
    "321.50",
    "13.57",
    "3.46",
    "1853.20",
    "984.23",
    "16.11",
    "8.56",
  ],
];

function addSortFunctionality() {
  let elements = document.getElementsByClassName("ts-sortable");
  for (let th of elements) {
    th.addEventListener("click", (e) => {
      sortData(Number(e.target.dataset["index"]));
      createRows();
    });
  }
}

let prevSortElement = undefined;
function sortData(index) {
  if (prevSortElement) prevSortElement.classList.remove("white");
  let th = document.querySelector(`#ts-header th:nth-child(${index + 1})`);
  th.classList.add("white");
  prevSortElement = th;

  let header = ts_data.shift();
  let reverseConstant = index == 0 ? 1 : -1;
  ts_data.sort((a, b) => {
    if (index > 0) {
      a[index] = Number(a[index]);
      b[index] = Number(b[index]);
    }
    if (a[index] < b[index]) return -1 * reverseConstant;
    else if (a[index] > b[index]) return 1 * reverseConstant;
    else return 0;
  });
  ts_data.unshift(header);
}

let ts_header = document.getElementById("ts-header");
ts_header.innerHTML = "";
let ts_content = "";
for (let i = 0; i < ts_data[0].length; i++) {
  ts_content += `<th class='ts-sortable ${
    i == 0 ? "sticky-header" : ""
  }' data-index=${i} style='border-right: solid black 1px'>${
    ts_data[0][i]
  }</th>`;
}
ts_header.innerHTML = ts_content;

let ts_body = document.getElementById("tbody-start");

function createRows() {
  ts_body.innerHTML = "";
  for (let i = 1; i < ts_data.length; i++) {
    let row = document.createElement("tr");
    let row_content = "";
    for (let j = 0; j < ts_data[i].length; j++) {
      row_content += `<td ${j == 0 ? "class='sticky-col'" : ""} style='${
        j == 0 ? "white-space: nowrap; padding: 0px 5px" : "text-align:center"
      }; border-right: 1px solid black'>${ts_data[i][j]}</td>`;
    }
    row.innerHTML = row_content;
    ts_body.appendChild(row);
  }
}

addSortFunctionality();
sortData(0);
createRows();
